---
import BaseLayout from "../../layouts/BaseLayout.astro";
import Nav from "../../components/Nav.astro";
import Section from "../../components/Section.astro";
import RsvpForm from "../../components/RsvpForm.astro";
import { wedding } from "../../data/wedding";
import { ui, languages, defaultLang } from "../../i18n/ui";

export function getStaticPaths() {
  return Object.keys(languages).map((lang) => ({ params: { lang } }));
}

const { lang } = Astro.params;
const currentLang = (lang as keyof typeof wedding) || defaultLang;
const data = wedding[currentLang];
const t = ui[currentLang];
---

<BaseLayout title={`${data.couple} · ${data.dateDisplay}`}>
  <Nav
    nav={wedding.en.nav}
    couple={data.couple}
    dateDisplay={data.dateDisplay}
    lang={currentLang}
  />

  <!-- HERO -->
  <main>
    <section class="relative">
      <div class="h-[70vh] min-h-[520px] w-full">
        <img
          src={`${import.meta.env.BASE_URL}hero.jpg`}
          alt="Couple photo"
          class="h-full w-full object-cover"
          loading="eager"
        />
      </div>

      <div class="absolute inset-0 bg-black/20"></div>

      <div class="absolute inset-0 flex items-center">
        <div class="container-narrow">
          <p class="text-white/90 tracking-wide">{data.headline}</p>
          <h1 class="mt-3 text-white text-4xl md:text-6xl tracking-tight">
            {data.couple}
          </h1>
          <p class="mt-4 text-white/90 text-lg">{data.dateDisplay}</p>

          <div class="mt-8 flex gap-3">
            <a
              href={`/${currentLang}#rsvp`}
              class="rounded-xl bg-white text-black px-5 py-3 hover:opacity-90"
            >
              {t["hero.rsvp"]}
            </a>
            <a
              href={`/${currentLang}#details`}
              class="rounded-xl bg-black/40 text-white px-5 py-3 hover:bg-black/55"
            >
              {t["hero.details"]}
            </a>
          </div>
        </div>
      </div>
    </section>

    <!-- DETAILS -->
    <Section id="details" title="">
      <div class="grid md:grid-cols-2 gap-6">
        <div class="card p-6 md:p-10">
          <h2 class="text-2xl mb-2">{t["ceremony.title"]}</h2>
          <p class="text-black/70">{data.ceremony.time}</p>
          <p class="mt-4 font-medium">{data.ceremony.place}</p>
          <p class="text-black/70">
            {data.ceremony.addressLines.join(" · ")}
          </p>
          <a
            class="link inline-block mt-4"
            href={data.ceremony.mapUrl}
            target="_blank"
            rel="noreferrer"
          >
            {t["ceremony.map"]}
          </a>
        </div>

        <div class="card p-6 md:p-10">
          <h2 class="text-2xl mb-2">{t["reception.title"]}</h2>
          <p class="text-black/70">{data.reception.time}</p>
          <p class="mt-4 font-medium">{data.reception.place}</p>
          <p class="text-black/70">
            {data.reception.addressLines.join(" · ")}
          </p>
          <a
            class="link inline-block mt-4"
            href={data.reception.mapUrl}
            target="_blank"
            rel="noreferrer"
          >
            {t["reception.map"]}
          </a>
        </div>
      </div>
    </Section>

    <Section id="story" title={t["story.title"]}>
      <div class="card p-6 md:p-10 space-y-4 text-black/80">
        <p>{data.story.text}</p>
        <p>
          {data.story.subtext}
        </p>
      </div>
    </Section>

    <Section id="travel" title={t["travel.title"]}>
      <div class="grid md:grid-cols-2 gap-6">
        <div class="card p-6 md:p-10">
          <h3 class="text-xl mb-3">{t["travel.getting_there"]}</h3>
          <p class="text-black/80">
            {data.travel.gettingThere}
          </p>
        </div>
        <div class="card p-6 md:p-10">
          <h3 class="text-xl mb-3">{t["travel.hotels"]}</h3>
          <ul class="list-disc pl-6 text-black/80 space-y-2">
            {
              data.travel.hotels.map((hotel) => (
                <li>
                  <a
                    class="link"
                    href={hotel.url}
                    target="_blank"
                    rel="noreferrer"
                  >
                    {hotel.name}
                  </a>{" "}
                  — {hotel.note}
                </li>
              ))
            }
          </ul>
        </div>
      </div>
    </Section>

    <Section id="registry" title={t["registry.title"]}>
      <div class="card p-6 md:p-10 text-black/80 space-y-4">
        <p>{data.registry.text}</p>
        <p>
          {
            data.registry.links.map((link) => (
              <span>
                <a
                  class="link"
                  href={link.url}
                  target="_blank"
                  rel="noreferrer"
                >
                  {link.label}
                </a>
              </span>
            ))
          }
        </p>
      </div>
    </Section>

    <Section id="rsvp" title={t["rsvp.title"]}>
      <RsvpForm lang={currentLang} />
    </Section>

    <footer class="py-16">
      <div class="container-narrow text-sm text-black/60">
        {t["footer.built_with"]}
      </div>
    </footer>
  </main>
</BaseLayout>
